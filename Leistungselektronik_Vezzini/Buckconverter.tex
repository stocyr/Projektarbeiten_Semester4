	%% Dokumenteinstellungen %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\documentclass[a4paper,oneside,12pt,ngerman]{scrartcl}

%% Deutsche Anpassungen %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage[ngerman]{babel}
\usepackage[T1]{fontenc}
\usepackage[ansinew]{inputenc}
\usepackage{lmodern} %Type1-Schriftart für nicht-englische Texte
\usepackage{booktabs}	% schï¿½nere tabellen

%% Packages fï¿½r Grafiken & Abbildungen %%%%%%%%%%%%%%%%%%%%%%
\usepackage{graphicx} %%Zum Laden von Grafiken
%\usepackage{subfig} %%Teilabbildungen in einer Abbildung
%\usepackage{tikz} %%Vektorgrafiken aus LaTeX heraus erstellen


%% Packages fï¿½r Formeln %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{amsfonts}


%% Andere Packages %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\usepackage{a4wide} %%Kleinere Seitenrï¿½nder = mehr Text pro Zeile.
\usepackage{fancyhdr} %%Fancy Kopf- und Fuï¿½zeilen
%\usepackage{longtable} %%Für Tabellen, die eine Seite ï¿½berschreiten
\usepackage{lastpage}
\usepackage[raggedright]{subfigure}
\usepackage[final]{pdfpages}
\includepdfset{pages=-,noautoscale}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% TODO
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% 
% 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Optionen / Modifikationen
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\input{Einstellungen}

% Formeln römisch nummerieren
\renewcommand{\theequation}{\Roman{equation}} 

% "Formel" statt "Gleichung"
\def\equationname{Formel}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% DOKUMENT
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{document}

\title{Projektarbeit: Buckconverter (Step-Down)}
\date{\today}
\author{Cyril Stoller, Jascha Haldemann, Marcel Bärtschi, Nicola Käser}
\maketitle


%\pagestyle{fancy} %%Ab hier die Kopf-/Fusszeilen: headings / fancy / ...

\vspace{1cm}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%                                                         %%
%%         Kapitel / Hauptteil des Dokumentes              %%
%%                                                         %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Ziel/Einleitung}
Anhand eines Stepdown (Buck) Converters soll die erarbeitete Theorie über Leistungselektronik angewendet werden. Die Diode und der MOSFET sind vorgegeben, die Drossel und der Kondensator müssen dimensioniert werden.
Mithilfe der Theorie und der Application Note von Infineon sollen alle Berechnungen für die Verluste durchgeführt werden. Alle Werte sollen für einen Eingangsspannungsbereich von 12-75 Volt, eine Ausgangsspannung von 10-30 Volt und einen Ausgangsstrom von 1-10 Ampere berechnet werden. 

Dieser Bericht erläutert die Funktionsweise des Buckconverters, zeigt die Berechnung und die Auswertung der Wirkungsgrade und noch die Dimensionierung der passiven Komponenten (Drossel und Kondensator). Die Funktionsweise des Regel-IC's (PWM-Generator) wird weggelassen.

Alle Berechnungen wurden in einem Matlab Skript (Buckconverter.m) durchgeführt, welches diesem Bericht beiliegt. Auf die genaue Implementierung wird in diesem Bericht nicht eingegangen. Es wird vorausgesetzt, dass ein grundlegendes Verständnis der Matlab Skriptsprache vorhanden ist. Somit ist der Code (mit Kommentar) selbsterklärend.

\section{Schema}
Ein Buckconverter oder Abwärtswandler funktioniert nach folgendem Schema. Die PWM-Ansteuerung des MOSFET wurde hier einfachheitshalber weggelassen. Zudem nehmen wir an, dass der Wandler immer im kontinuierlichen Betrieb arbeitet. Das heisst, der Strom am Ausgang $I_0$ wird nie Null. Somit wird in der On-Phase (MOSFET leitet) der Strom durch die Spule nach dem Induktionsgesetz ansteigen. Schaltet nun der MOSFET ab, liegt über der Spule im wesentlichen die Ausgangsspannung, wodurch demach der Strom $I_L$ linear abfällt. Damit ergibt sich am Ausgang gemittelt über die Zeit eine konstante Spannung $U_0$, welche mit dem Kondensator noch etwas geglättet wird.

\begin{figure}[ht]
	\centering
		\includegraphics[width=0.90\textwidth]{pics/schema.pdf}
	\caption{Schema Stepdown Converter}
	\label{fig:schema}
\end{figure}

\section{Duty Cycle}
Um den Duty Cycle zu bestimmen, sind wir nach Fomel (\ref{formel:DutyCycle}) vorgegangen. Im Matlabskript haben wir für alle Werte, welche in einem gewissen Bereich variieren, Matrizen erstellt. Somit können wir einfach elementweise alle Werte berechnen, ohne mit Schleifen zu arbeiten. Dies ist viel anschaulicher und intuitiv lesbar. 

\begin{align}
	\label{formel:DutyCycle}
		D =\frac{(V_0 + (R_l + R_0) \cdot I_0 + V_{f0})}{(V_{in} - (R_{DSon} + R_{sh} - R_0) \cdot I_0 + V_{f0})} 
\end{align}

Aus dieser Formel ergibt sich für die Ein- bzw. Ausgangsspannung bei 10 Ampere folgende Grafik:

\begin{figure}[ht]
	\centering
		\includegraphics[width=1\textwidth]{pics/DutyCycle.pdf}
	\caption{Duty Cycle bei 10A}
	\label{fig:Duty Cycle}
\end{figure}

Man erkennt gut, dass dort, wo die Ausgangsspannung fast gleich gross ist wie die Eingangsspannung, der Duty Cycle beinahe $1$ wird. Dies macht ja auch Sinn, denn in diesem Fall muss beinahe die gesamte Eingangsleistung an den Ausgang weitergegeben werden. 

\section{Wirkungsgrad}
Um den Wirkungsgrad zu bestimmen, muss zuerst die gesamte Verlustleistung ausgerechnet werden. Dies besteht aus den Schalt-und Leitverlusten. Die Leckverluste werden vernachlässigt. 
\subsection{Leitverluste}
Die Leitverluste werden mit einfachen Modellen der Bauteile berechnet. Dabei wird z.B. beim MOSFET nur der Drain-Source Widerstand bestimmt und mit dem quadrierten Effektivwert des durchfliessenden Stromes multipliziert.

\subsection{Schaltverluste}
Diese Berechnung war wohl der aufwändigste Teil unseres Projekts. Um die Schaltverluste zu berechnen, müssen einige Werte aus Datenblättern ausgelesen werden und danach richtig in die Formel eingesetzt werden.

Erstaunlich ist, dass die Schaltverluste (bei $I_0$ fix) linear zur Ausgangsspannung und total unabhängig von der Eingangsspanung sind. Ebenso erstaunlich ist die Tatsache, dass es sich bei den Schaltverlusten um recht hohe Leistungen ($P_{Smax} = 1.105W$) handelt.
\subsection{Auswertung Wirkungsgrad}
Berechnen wir nun den Wirkungsgrad, ergibt sich für $I_0 = 10A$ folgendes Bild:

\begin{figure}[ht]
	\centering
		\includegraphics[width=0.61\textwidth]{pics/grafik_10A.png}
	\caption{Wirkungsgrad bei 10A}
	\label{fig:Wirkungsgrad}
\end{figure}

Das Matlabskript erstellt automatisch Bilder des Wirkungsgrades für 1 bis 10 Ampere und speichert diese im Ordner \textit{./pics}.

Man erkennt hier einen Worst-Case Wirkungsgrad bei $V_{IN}$, $V_0$ und $I_0$ von etwa 93\%. Dieses Resultat erscheint realistisch und ist etwa in der Grössenordnung wo wir es vermutet haben. 

\section{Dimensionierung Drossel}
Die Spule kann berechnet werden, indem man bei maximalem Rippel $\Delta$i (20\% von $I_{0max}$ gewählt) die Spannung über der Spule bestimmt. 

\begin{align}
	\label{formel:b}
	U_L=L\cdot\frac{di}{dt} 
\end{align}

Die Formel (\ref{formel:b}) kann für kleine $\Delta$i und kurze Zeiten folgendermassen approximiert werden:

\begin{align}
	U_L=L\cdot\frac{\Delta i}{D\cdot T} 
\end{align}

Wobei D der Duty Cycle und T die Periodendauer sind.
Stellt man die Gleichung nach L um und berechnet die Spannung $U_L$ nach dem Kirchhofschen Maschensatz, erhält man die Gleichung:

\begin{align}
	\begin{split}
		L &= \frac{(V_{IN}-V_{0}-(R_{SH}+R_{DSon})\cdot I_0)\cdot D \cdot T}{\Delta i} \\
		&=\frac{(75V-30V-(10m\Omega+2.7m\Omega)\cdot 10A)\cdot 0.4074 \cdot 12.5\mu s}{2A} = 114\mu H
	\end{split}
\end{align}

Hat man den Rippel des Stromes für den Maximalwert bestimmt, kann man mit der gewählten Spule den Rippel für alle anderen Konditionen berechnen, was zu nachstehendem Plot führt:

\begin{figure}[ht]
	\centering
		\includegraphics[width=1\textwidth]{pics/Rippel10A_3.pdf}
	\caption{Rippel bei 10A}
	\label{fig:Rippel}
\end{figure}

Nun ist die Spule vom Wert für die Induktivität vorgegeben. Um nun eine geeignete Drossel auszuwählen, kann das Tool \textit{Ferrite Magnetic Design Tool} verwendet werden. Da wir möglichst kleine Kernverluste wollen, ist es empfehlenswert, ein Material für den Kern auszuwählen, welches eine schmale Hysterese aufweist. 

Aufgrund von fehlenden Informationen und der Tatsache, dass der zeitliche Aufwand, sich in dieses einigermassen komplexe Thema zu vertiefen, zu gross erschien, haben wir die weitere Dimensionierung der Drossel hier nicht weiter ausgeführt.



\section{Dimensionierung Kondensator}
Als Kondensator haben wir mit Hilfe des Onlinetools von \textit{TDK EPCOS} folgenden ausgewählt: TDK B41231. Er hat eine Kapazität von 4.7mF bei 30 Volt und eine Lebensdauer von 2000 Stunden. Uns fehlt hier aber die Erfahrung, um abschätzen zu können, ob diese Wahl geeignet ist.

\section{Auswertung}
Das Projekt war für uns eine gute Übung, die Leistungselektronik anzuwenden. Jedoch waren einige Punkte unklar, insbesondere war die Aufgabenstellung aus unserer Sicht etwas schwammig definiert. Dazu ist unser Vorschlag für nächstes Jahr: Ein eigenes Dokument mit der Aufgabenstellung, wo auch die Angaben gemacht werden statt die Aufgabenstellung in die Slides der Vorlesungspräsentation zu integrieren. Denn das kann zu Verwirrung führen, insbesondere wenn es in mehreren Slides ähnliche Aufgabenstellungen hat.


Ansonsten war vor allem der gute Wirkungsgrad des Wandlers und der Einfluss der Schaltverluste beeindruckend. 
Schwierigkeiten hatten wir bei der Dimensionierung der Drossel und des Kondensators, was wir schlussendlich weggelassen haben. Trotzdem sind wir mit dem Ergebnis des Berichts zufrieden.

%% Der Anhang kommt auf eine neue Zeile
%\newpage
%% Offizielle "A Anhang" Aufzählungsvariante
%\appendix
%% Nur im Inhaltsverzeichnis hinzufï¿½gen (mit richtiger Seite, da vorher "\newpage"), aber kein Text
%\addcontentsline{toc}{section}{Anhang}
%
%% Quellenverzeichnis
%%\addcontentsline{toc}{section}{Quellenverzeichnis}
%\section{Quellenverzeichnis}
%\renewcommand\refname{}
%
%\vspace{-1cm}
%
%\bibliographystyle{amsplain}
%\bibliography{Bildquellen}

\end{document}
